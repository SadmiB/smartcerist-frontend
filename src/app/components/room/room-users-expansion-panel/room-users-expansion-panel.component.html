<app-header back="true" title='Users' search="false"></app-header>
<h4> Room Users </h4>
<mat-card>
<mat-accordion>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Add a User
      </mat-panel-title>
      <mat-panel-description>
        restricted permissions
      </mat-panel-description>
    </mat-expansion-panel-header>

    <app-person-add type="user"></app-person-add>
  </mat-expansion-panel>
  <mat-expansion-panel (opened)="panelOpenState = true"
                       (closed)="panelOpenState = false">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Add an Admin
      </mat-panel-title>
      <mat-panel-description>
        all permissions
      </mat-panel-description>
    </mat-expansion-panel-header>
    <app-person-add type="admin"></app-person-add>
  </mat-expansion-panel>
</mat-accordion>

<table>
  <tr>
    <th>First name</th>
    <th>Last name</th>
    <th>Email</th>
    <th>Permissions</th>
    <th>Settings</th>
  </tr>
    <tr *ngFor="let user of usersService.users | async ">
      <td>{{user.firstName}}</td>
      <td>{{user.lastName}}</td>
      <td>{{user.email}}</td>
      <td><app-user-permissions  roomId="{{roomId}}" userId="{{user._id}}"></app-user-permissions></td>
      <td>
        <button mat-icon-button  (click)="editUser(user._id)"><mat-icon>edit</mat-icon></button>
        <button mat-icon-button  (click)="deleteUser(user._id)" ><mat-icon>delete</mat-icon></button>
      </td>
    </tr>
  </table>

</mat-card>
